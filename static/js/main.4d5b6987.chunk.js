(this.webpackJsonporceus=this.webpackJsonporceus||[]).push([[0],{143:function(e,t,a){},145:function(e,t,a){},149:function(e,t,a){},151:function(e,t,a){},154:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a.n(c),s=a(12),l=a.n(s),i=(a(143),a(19)),o=a(43),u=a(27),d=a(28),h=a(17),b=a(35),j=a(34),p=a(119),m=a(62),f={profile:{connected:!1,isAdmin:!1},get:function(e){return e in this.profile?this.profile[e]:null}},g=a(47),v=a.n(g),O=a(70),x="https://kf3hmnez3b.execute-api.eu-west-3.amazonaws.com/Orceus";function y(e){return C.apply(this,arguments)}function C(){return(C=Object(O.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new Headers({Accept:"application/json","Content-Type":"application/json"}),e.next=4,fetch(x+t,{method:"GET",headers:a});case 4:return n=e.sent,e.next=7,n;case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function k(e,t){return N.apply(this,arguments)}function N(){return(N=Object(O.a)(v.a.mark((function e(t,a){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Headers({Accept:"application/json","Content-Type":"application/json"}),e.next=4,fetch(x+t,{method:"POST",mode:"cors",headers:n,body:JSON.stringify(a)});case 4:return c=e.sent,e.next=7,c;case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(){return(w=Object(O.a)(v.a.mark((function e(t,a){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Headers({Accept:"application/json","Content-Type":"application/json"}),e.next=4,fetch(x+t,{method:"DELETE",headers:n,body:JSON.stringify(a)});case 4:return c=e.sent,e.next=7,c;case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function S(e){var t=Object.assign({},e);return Object(n.jsx)("video",{className:"background",autoPlay:!0,loop:!0,muted:!0,children:Object(n.jsx)("source",{src:t.source,type:"video/mp4"})},t.vKey)}a(145);var T=a.p+"static/media/loginBackground.c0f87895.mp4",E=a.p+"static/media/successBackground.9fe993ed.mp4",A=a.p+"static/media/errorBackground.909f594d.mp4",M=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={password:"",error:!1,loginState:null,connected:f.get("connected")},n.handlePassword=n.handlePassword.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("Orceus");null!==e&&this.handleSubmit(e)}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,a=e||this.state.password;k("/login",{password:a}).then((function(e){if(console.log(0),!e.ok)throw Error();return e.json()})).then((function(e){t.setState({loginState:"success"},(function(){localStorage.setItem("Orceus",a),f.profile={connected:e.connected,isAdmin:e.is_admin},setTimeout((function(){t.setState({connected:!0,loginState:null}),t.props.location.state?t.props.history.push(t.props.location.state.referrer):t.props.history.push("/Orceus/cards")}),1500)}))})).catch((function(){t.setState({error:!0,loginState:"error"},(function(){localStorage.removeItem("Orceus"),setTimeout((function(){t.setState({error:!1,loginState:null})}),1666)}))}))}},{key:"render",value:function(){var e=this,t=window.innerWidth<=600,a=["div-centered"];return this.state.loginState&&a.push("d-none"),Object(n.jsxs)("div",{className:"login-container",children:[null!==this.state.loginState||t?null:Object(n.jsx)(S,{source:T,vKey:"login"}),"success"!==this.state.loginState||t?null:Object(n.jsx)(S,{source:E,vKey:"login-success"}),"error"!==this.state.loginState||t?null:Object(n.jsx)(S,{source:A,vKey:"login-success"}),Object(n.jsxs)("div",{className:a.join(" "),children:[Object(n.jsx)(p.a,{onChange:this.handlePassword,value:this.state.password,placeholder:"Mot de passe",style:{marginRight:"15px"}}),Object(n.jsx)(m.a,{variant:"contained",onClick:function(){e.handleSubmit()},children:"Enter"}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{className:this.state.error?"error":"hide-error",children:"mauvais mot de passe"})]})]})}}]),a}(r.a.Component),I=a(89),L=a(213),P=a(214),z=a(215),D=a(216),F=(a(149),function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={card:""},n.getCard=n.getCard.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getCard()}},{key:"getCard",value:function(){var e=this;this.props.id&&y("/cards/"+this.props.id).then((function(e){if(!e)throw Error();return e.json()})).then((function(t){if(!t)throw Error();e.setState({card:t[0]})})).catch((function(){console.log("Erreur lors de l'update")}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"center",style:{height:"100vh"},children:Object(n.jsx)(I.b,{defaultScale:1,children:function(t){var a=t.zoomIn,c=t.zoomOut,s=t.resetTransform;return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(o.b,{className:"tool-btn tool-back-arrow",to:"/Orceus/cards",children:Object(n.jsx)(L.a,{})}),Object(n.jsx)("div",{className:"tool-btn tool-zoomin",onClick:a,children:Object(n.jsx)(P.a,{})}),Object(n.jsx)("div",{className:"tool-btn tool-zoomout",onClick:c,children:Object(n.jsx)(z.a,{})}),Object(n.jsx)("div",{className:"tool-btn tool-reset",onClick:s,children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(I.a,{children:Object(n.jsx)("img",{className:"full-card",src:e.state.card.big_card,alt:" "})})]})}})})}}]),a}(r.a.Component)),B=a(217),H=a(218),V=(a(151),function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={cards:[],loading:!0},n.getCardList=n.getCardList.bind(Object(h.a)(n)),n.logout=n.logout.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getCardList()}},{key:"getCardList",value:function(){var e=this;y("/cards").then((function(e){if(!e.ok)throw Error();return e.json()})).then((function(t){e.setState({cards:t,loading:!1})})).catch((function(){e.setState({loading:!1}),console.log("Erreur lors de la recup\xe9ration des datas")}))}},{key:"logout",value:function(){f.profile.connected=!1,f.profile.isAdmin=!1,localStorage.removeItem("Orceus"),this.props.history.push("/Orceus/")}},{key:"render",value:function(){var e=this.state.cards.map((function(e,t){return Object(n.jsx)(o.b,{to:"/Orceus/cards/"+e.id,children:Object(n.jsx)("img",{className:"card-img",src:e.card,alt:" "})},t)}));return Object(n.jsxs)("div",{className:"p-1",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(m.a,{variant:"contained",color:"primary",onClick:this.logout,children:"D\xe9connexion"}),f.get("isAdmin")?Object(n.jsx)(o.b,{to:"/Orceus/AdminSettings",className:"setting-btn",children:Object(n.jsx)(B.a,{style:{color:"white"},className:"clickable"})}):null]}),Object(n.jsxs)("div",{className:"container-card-menu",children:[e,0!==e.length||this.state.loading?null:Object(n.jsx)("div",{style:{color:"white"},children:"Aucune donn\xe9e"}),this.state.loading?Object(n.jsx)("div",{className:"rotate",children:Object(n.jsx)(H.a,{className:"loading"})}):null]})]})}}]),a}(r.a.Component));function _(e){var t=e.history,a=Object(i.h)();return Object(n.jsxs)(i.c,{children:[Object(n.jsx)(i.a,{path:"".concat(a.path,"/:id"),children:Object(n.jsx)(R,{history:t})}),Object(n.jsx)(i.a,{path:a.path,children:Object(n.jsx)(V,{history:t})})]})}function R(){var e=Object(i.g)().id;return Object(n.jsx)(F,{id:e})}var J=a(109),K=a(222),W=a(221),U=a(223),q=a(220),G=a(21),Q=a(219),X=a(92),Y=(a(154),[{label:"Personnage",value:"character"},{label:"Carte",value:"map"},{label:"Peuple/Race",value:"class"},{label:"Mineral",value:"mineral"},{label:"V\xe9g\xe9tal",value:"vegetable"},{label:"Ville",value:"city"},{label:"Cr\xe9ature",value:"monster"},{label:"Artefact",value:"artefact"},{label:"Autre",value:"other"}]),Z=[{label:"Inconnue",value:"Unknown"},{label:"Ciheuphe",value:"ciheuphe"},{label:"Humain",value:"human"},{label:"Shashouille",value:"shashouille"},{label:"Robot",value:"robot"},{label:"Hanylice",value:"hanylice"},{label:"Suhera",value:"suhera"},{label:"Ao-Nesa",value:"ao-nesa"},{label:"Biri-Ozi",value:"biri-ozi"},{label:"Wibsa-Thu",value:"wibsa-thu"},{label:"Autre",value:"other"}],$={placeholder:function(e){return Object(G.a)(Object(G.a)({},e),{},{color:"white"})},singleValue:function(e){return Object(G.a)(Object(G.a)({},e),{},{color:"white"})},menu:function(e){return Object(G.a)(Object(G.a)({},e),{},{color:"white",backgroundColor:"black"})},control:function(e){return Object(G.a)(Object(G.a)({},e),{},{color:"white",background:"black",backgroundColor:"black"})},option:function(e){return Object(G.a)(Object(G.a)({},e),{},{backgroundColor:"black","&:hover":{backgroundColor:"rgb(131, 131, 131)"}})}},ee=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={closing:!1,card:{name:"",desc:"",type:null,specie:null,card:null,big_card:null,tags:[]},loading:!1},n.getCard=n.getCard.bind(Object(h.a)(n)),n.close=n.close.bind(Object(h.a)(n)),n.changeText=n.changeText.bind(Object(h.a)(n)),n.handleSelect=n.handleSelect.bind(Object(h.a)(n)),n.handleTags=n.handleTags.bind(Object(h.a)(n)),n.removeTag=n.removeTag.bind(Object(h.a)(n)),n.addTag=n.addTag.bind(Object(h.a)(n)),n.handleImg=n.handleImg.bind(Object(h.a)(n)),n.submit=n.submit.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getCard()}},{key:"getCard",value:function(){var e=this;this.props.id&&y("/cards/"+this.props.id).then((function(e){if(!e)throw Error();return e.json()})).then((function(t){if(!t)throw Error();e.setState({card:t[0]})})).catch((function(){console.log("Erreur lors de l'update")}))}},{key:"close",value:function(){var e=this;this.setState({closing:!0},(function(){setTimeout((function(){e.setState({closing:!1},(function(){e.props.close()}))}),300)}))}},{key:"changeText",value:function(e,t){var a=Object(G.a)({},this.state.card);a[t]=e,this.setState({card:a})}},{key:"handleSelect",value:function(e,t){var a=Object(G.a)({},this.state.card);a[e]=t.value,this.setState({card:a})}},{key:"handleImg",value:function(e){var t=this,a=document.getElementById(e);a.click(),a.addEventListener("change",(function(a){var n=a.target.files[0],c=new FormData;c.append("image",n);var r={Authorization:"Client-ID af0b96c87fae8bf"};t.setState({loading:!0},(function(){fetch("https://api.imgur.com/3/image",{mode:"cors",headers:r,method:"POST",body:c}).then((function(e){if(!e.ok)throw Error();return e.json()})).then((function(a){var n=Object(G.a)({},t.state.card);"card"===e?n.card=a.data.link:n.big_card=a.data.link,t.setState({card:n,loading:!1})})).catch((function(e){console.log(e)}))}))}))}},{key:"handleTags",value:function(e,t){var a=Object(G.a)({},this.state.card);a.tags[e]=t,this.setState({card:a})}},{key:"removeTag",value:function(e){var t=Object(G.a)({},this.state.card);t.tags.splice(e,1),this.setState({card:t})}},{key:"addTag",value:function(){var e=Object(G.a)({},this.state.card);e.tags.push(""),this.setState({card:e})}},{key:"getValueFromOptions",value:function(e,t){if(!t)return null;return"type"===e?Y.filter((function(e){return e.value===t})):Z.filter((function(e){return e.value===t}))}},{key:"submit",value:function(){var e=this;if(this.props.id){k("/card/"+this.props.id,Object(G.a)({},this.state.card)).then((function(e){if(!e)throw Error();return e.json()})).then((function(t){if(!t)throw Error();e.props.update(),e.props.close()})).catch((function(){console.log("Erreur lors de l'update")}))}else{k("/card/",Object(G.a)({},this.state.card)).then((function(e){if(!e)throw Error();return e.json()})).then((function(t){if(!t)throw Error();e.props.update(),e.props.close()})).catch((function(){console.log("Erreur lors de l'ajout")}))}}},{key:"render",value:function(){var e=this,t=["admin-modale-container","margin-modale"],a="Cr\xe9ation",c="Cr\xe9er",r=null,s=null,l=["input-card","p-0"],i=["input-big-card","p-0"];return this.props.show&&!this.state.closing&&t.push("show"),this.props.id&&(a="Modification",c="Appliquer"),this.state.card.card&&(l.push("bg-transparent"),r=this.state.card.card),this.state.card.big_card&&(i.push("bg-transparent"),s=this.state.card.big_card),Object(n.jsxs)("div",{className:t.join(" "),children:[Object(n.jsxs)("div",{className:"header-modale pb-2",children:[Object(n.jsx)(Q.a,{className:"close-modale-btn",onClick:this.close}),Object(n.jsxs)("div",{className:"modale-title",children:[a," d'une carte"]})]}),Object(n.jsxs)("div",{className:"body-modale",children:[Object(n.jsx)("label",{className:"label-modale",children:"Nom :"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"input-modale",type:"text",value:this.state.card.name?this.state.card.name:"",onChange:function(t){return e.changeText(t.target.value,"name")}}),Object(n.jsx)("label",{className:"label-modale",children:"Description :"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"input-modale",type:"text",value:this.state.card.desc?this.state.card.desc:"",onChange:function(t){return e.changeText(t.target.value,"desc")}}),Object(n.jsx)("label",{className:"label-modale",children:"Type :"}),Object(n.jsx)("br",{}),Object(n.jsx)(X.a,{className:"input-modale",type:"text",options:Y,value:this.getValueFromOptions("type",this.state.card.type),onChange:function(t){e.handleSelect("type",t)},styles:$}),"character"===this.state.card.type?Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label-modale",children:"Esp\xe8ce :"}),Object(n.jsx)("br",{}),Object(n.jsx)(X.a,{className:"input-modale",type:"text",options:Z,value:this.getValueFromOptions("specie",this.state.card.specie),onChange:function(t){e.handleSelect("specie",t)},styles:$})]}):null,Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label-modale",children:"Carte (petite) :"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"file",id:"card",className:"d-none",alt:"",accept:".jpg,.png"}),Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)("button",{className:l.join(" "),onClick:function(){e.handleImg("card")},children:Object(n.jsx)("img",{className:"input-image",src:r,alt:""})})})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label-modale",children:"Fiche (grande) :"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"file",id:"big_card",className:"d-none",alt:"",accept:".jpg,.png"}),Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)("button",{className:i.join(" "),onClick:function(){e.handleImg("big_card")},children:Object(n.jsx)("img",{className:"input-image",src:s,alt:""})})})]}),Object(n.jsx)("label",{className:"label-modale",children:"Tags :"}),Object(n.jsx)(q.a,{className:"add-tag",onClick:this.addTag}),Object(n.jsx)("br",{}),this.state.card.tags.map((function(t,a){return Object(n.jsxs)("div",{className:"tag-container",children:[Object(n.jsx)("input",{type:"text",className:"input-tag",value:t,onChange:function(t){e.handleTags(a,t.target.value)}}),Object(n.jsx)(W.a,{className:"delete-tag",onClick:function(){return e.removeTag(a)}})]},"tag"+a)}))]}),Object(n.jsx)("div",{className:"footer-modale pt-2",children:Object(n.jsx)(m.a,{className:"submit-btn",variant:"contained",color:"primary",onClick:this.submit,disabled:this.state.loading,children:c})})]})}}]),a}(r.a.Component),te=(a(165),[{label:"Personnage",value:"character"},{label:"Carte",value:"map"},{label:"Peuple/Race",value:"class"},{label:"Mineral",value:"mineral"},{label:"V\xe9g\xe9tal",value:"vegetable"},{label:"Ville",value:"city"},{label:"Cr\xe9ature",value:"monster"},{label:"Artefact",value:"artefact"},{label:"Autre",value:"other"}]),ae=[{label:"Inconnue",value:"Unknown"},{label:"Ciheuphe",value:"ciheuphe"},{label:"Humain",value:"human"},{label:"Shashouille",value:"shashouille"},{label:"Robot",value:"robot"},{label:"Hanylice",value:"hanylice"},{label:"Suhera",value:"suhera"},{label:"Ao-Nesa",value:"ao-nesa"},{label:"Biri-Ozi",value:"biri-ozi"},{label:"Wibsa-Thu",value:"wibsa-thu"},{label:"Autre",value:"other"}],ne=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={cards:[],selectedCard:null,openModal:!1},n.getCardList=n.getCardList.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getCardList()}},{key:"getCardList",value:function(){var e=this;y("/cards").then((function(e){if(!e)throw Error();return e.json()})).then((function(t){e.setState({cards:t})})).catch((function(){console.log("Erreur lors de la recup\xe9ration des datas")}))}},{key:"closeModal",value:function(){this.setState({openModal:!1,selectedCard:null})}},{key:"configureCard",value:function(e){this.setState({selectedCard:e,openModal:!0})}},{key:"deleteCard",value:function(e){var t=this;(function(e,t){return w.apply(this,arguments)})("/card/"+e).then((function(e){if(!e.ok)throw Error();return e.json()})).then((function(e){t.getCardList()})).catch((function(){console.log("Erreur lors de la suppression")}))}},{key:"render",value:function(){var e=this,t=[{headerName:"Name",field:"name",width:150},{headerName:"Desc",field:"desc",width:200},{headerName:"Type",field:"type",width:150,renderCell:function(e){var t=e.value,a=te.filter((function(e){return e.value===t}));return Object(n.jsx)("span",{children:0!==a.lenth?a[0].label:null})}},{headerName:"Esp\xe8ce",field:"specie",width:150,renderCell:function(e){var t=e.value,a=ae.filter((function(e){return e.value===t}));return Object(n.jsx)("span",{children:0!==a.lenth?a[0].label:null})}},{headerName:"Tags",field:"tags",flex:1},{headerName:"Actions",sortable:!1,field:"actions",width:150,renderCell:function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)(K.a,{className:"action-btn",onClick:function(){return e.configureCard(t.row.id)}}),Object(n.jsx)(W.a,{className:"action-btn",onClick:function(){return e.deleteCard(t.row.id)}})]})}}];return Object(n.jsxs)("div",{className:"adminsetting-container",children:[Object(n.jsxs)("div",{className:"d-flex row pb-2",children:[Object(n.jsx)(o.b,{to:"/Orceus/cards/",style:{color:"white"},children:Object(n.jsx)(U.a,{})}),Object(n.jsx)(m.a,{className:"right",variant:"contained",color:"primary",startIcon:Object(n.jsx)(q.a,{}),onClick:function(){e.configureCard(null)},children:"Nouveau"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(J.a,{rows:this.state.cards,columns:t,pageSize:10,autoHeight:!0}),this.state.openModal?Object(n.jsx)(ee,{show:this.state.openModal,update:this.getCardList,close:this.closeModal,id:this.state.selectedCard}):null]})]})}}]),a}(r.a.Component);a(166);function ce(e){var t=Object.assign({},e),a=Object(i.f)();return f.get("connected")||a.push("/Orceus/"),Object(n.jsx)(i.a,{history:a,path:t.path,component:t.component})}function re(){return Object(n.jsx)(o.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(i.c,{children:[Object(n.jsx)(ce,{path:"/Orceus/cards",component:_}),Object(n.jsx)(ce,{path:"/Orceus/AdminSettings",component:ne}),Object(n.jsx)(i.a,{exact:!0,path:"/Orceus/",component:M})]})})})}var se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,225)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};l.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(re,{})}),document.getElementById("root")),se()}},[[167,1,2]]]);
//# sourceMappingURL=main.4d5b6987.chunk.js.map